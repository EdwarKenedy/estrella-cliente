<ng-container *ngIf="usuario$ | async as usuario">
  <mat-toolbar color="primary">

    <div class="container">

      <div class="left">
        <button
          *ngIf="mediaQueryList.matches"
          mat-icon-button
          (click)="this.toggleSidevar()">
          <mat-icon *ngIf="!opened">menu</mat-icon>
          <mat-icon *ngIf="opened">menu_open</mat-icon>
        </button>
        <a class="nombre-empresa" routerLink="/home">
          LA ESTRELLA DEL SUR
        </a>
      </div>

      <div class="right" [matMenuTriggerFor]="menu">
        <img
          class="foto-perfil-toolbar"
          [src]="usuario.fotoPerfil | images: 'usuario'"
          alt="imagen de perfil">
      </div>

    </div>

  </mat-toolbar>

  <mat-menu #menu="matMenu">

    <div class="nombre-rol-usuario" (click)="$event.stopPropagation()">

      <img
        class="foto-perfil-menu"
        [src]="usuario.fotoPerfil | images: 'usuario'"
        alt="imagen de perfil">

      <div>
        <p>{{ usuario.nombres + ' ' + usuario.apellidos }}</p>
        <p>{{ usuario.correoElectronico }}</p>
        <a routerLink="/perfil" (click)="cerrarMenu()">Ver perfil</a>
      </div>

    </div>

    <button mat-menu-item [matMenuTriggerFor]="rolesMenu">
      Roles asignados
    </button>

    <button
      mat-menu-item
      (click)="cerrarSesion()"
      class="cerrar-sesion"
      type="button">
      Cerrar sesión
    </button>

  </mat-menu>

  <mat-menu #rolesMenu="matMenu">
    <ng-container *ngIf="usuario.rolesUsuarios.length > 0; else sinRoles">
      <button mat-menu-item *ngFor="let rolUsuario of usuario.rolesUsuarios" type="button">
        {{ rolUsuario.rol.nombre }}
      </button>
    </ng-container>

    <ng-template #sinRoles>
      <button mat-menu-item>
        No tiene asignado ningún rol
      </button>
    </ng-template>
  </mat-menu>
</ng-container>
